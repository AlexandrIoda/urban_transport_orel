<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>

    <meta charset="UTF-8">
    <title>Getting Started: Serving Web Content</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
          integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
          crossorigin=""/>

    <style type="text/css">
        #mapid {
            height: 800px;
        }
    </style>

</head>

<body>


<!-- Make sure you put this AFTER Leaflet's CSS -->
<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
        integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
        crossorigin=""></script>

<!--Moving marker-->
<!--https://github.com/ewoken/Leaflet.MovingMarker-->
<script src="https://cdn.rawgit.com/ewoken/Leaflet.MovingMarker/master/MovingMarker.js"></script>


<p th:text="'Hello!'"></p>

<div id="mapid"></div>

<script>
    var map = L.map('mapid').setView([53.716736, 23.840114], 14);
    mapLink = '<a href="http://openstreetmap.org">OpenStreetMap</a>';
    L.tileLayer(
        'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            // attribution: '&copy; ' + mapLink + ' Contributors',
            maxZoom: 18
        }).addTo(map);

    var marker = L.marker([53.716736, 23.840114]).addTo(map);
    marker.bindPopup("<b>Hello world!</b><br>I am a popup.").openPopup();

    var circle = L.circle([53.73, 23.85], {
        color: 'red',
        fillColor: '#f03',
        fillOpacity: 0.5,
        radius: 500
    }).addTo(map);

    // var popup = L.popup()
    //     .setLatLng([53.705, 23.85])
    //     .setContent("I am a standalone popup.")
    //     .openOn(map);

    // var popup2 = L.popup();
    //
    // function onMapClick(e) {
    //     popup2
    //         .setLatLng(e.latlng)
    //         .setContent("You clicked the map at " + e.latlng.toString())
    //         .openOn(map);
    // }
    //
    // map.on('click', onMapClick);


    var parisKievLL = [
        [53.716736, 23.840114],
        [53.73, 23.85]
    ];
    var marker1 = L.Marker.movingMarker(parisKievLL, [10000]).addTo(map);
    L.polyline(parisKievLL).addTo(map);
    marker1.once('click', function () {
        marker1.start();
        marker1.closePopup();
        marker1.unbindPopup();
        marker1.on('click', function () {
            if (marker1.isRunning()) {
                marker1.pause();
            } else {
                marker1.start();
            }
        });
        setTimeout(function () {
            marker1.bindPopup('<b>Click me to pause !</b>').openPopup();
        }, 2000);
    });

    marker1.bindPopup('<b>Click me to start !</b>', {closeOnClick: false});
    marker1.openPopup();


</script>


<p th:text="'Hello!'"></p>

</body>
</html>